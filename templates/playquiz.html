<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>QuizVerse</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind CSS -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    min-height: 100vh;
}

/* ===== Animation Text ===== */
.animation-wrapper {
    display: flex;
    justify-content: center;
    margin-top: 60px;
    color: white;
}

.line {
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    overflow: hidden;
}

.static-text {
    font-size: 16px;
    font-weight: 500;
}

.animated-text {
    font-size: 18px;
    font-weight: 500;
    animation: slidein 4s ease-in-out infinite;
}
.user-avatar {
  width: 40px;
  height: 40px;
  border-radius: 9999px;
  background: linear-gradient(135deg, #667eea, #764ba2);
}
.icon-btn {
  width: 36px;
  height: 36px;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Animation */
@keyframes slidein {
    0% {
        opacity: 0;
        transform: translateX(-20px);
    }
    30% {
        opacity: 1;
        transform: translateX(0);
    }
    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Mobile fix */
@media (max-width: 640px) {
    .static-text {
        font-size: 14px;
    }
    .animated-text {
        font-size: 15px;
    }
}

/* Progress bar animation */
.progress-fill {
    transition: width 0.3s ease-in-out;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

<!-- ================= HEADER ================= -->
<nav class="bg-purple-700 px-6 py-4 flex items-center text-white">
    <a href="#" class="flex items-center gap-3">
        <img src="https://i.postimg.cc/CMB8SBKw/Untitled-design-(3).png"
             class="h-10 w-10 rounded-md" alt="QuizVerse Logo">
        <span class="text-xl font-bold">QuizVerse</span>
    </a>

    <div class="ml-auto flex gap-6 items-center justify-center text-white font-semibold">
        <a href="/user_dashboard" class="hover:text-purple-300">Home</a>
        <div class="user-avatar flex items-center justify-center text-white font-semibold">X</div>
    </div>
</nav>

<!-- ================= QUIZ CARD ================= -->
<div class="max-w-2xl mx-auto mt-12 bg-white rounded-xl shadow-lg p-6">

    <!-- PROGRESS BAR -->
    <div id="progress-container" class="mb-6">
        <div class="flex justify-between items-center mb-2">
            <span class="text-sm font-medium text-gray-700">Progress</span>
            <span id="progress-text" class="text-sm font-medium text-purple-600">0%</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
            <div id="progress-bar" class="progress-fill bg-gradient-to-r from-purple-600 to-indigo-600 h-3 rounded-full" style="width: 0%"></div>
        </div>
    </div>

    <!-- TIMER -->
    <div id="timer-box" class="flex justify-center mb-6">
        <span id="timer"
              class="bg-purple-100 text-purple-700 px-6 py-2 rounded-full text-xl font-semibold">
            ‚è±Ô∏è Time Left: 30s
        </span>
    </div>

    <!-- FINISHED BADGE -->
    <div id="finished-badge" class="hidden flex justify-center mb-6">
        <span class="bg-purple-100 text-purple-700 px-6 py-2 rounded-full text-lg font-semibold">
            üéâ Quiz Finished
        </span>
    </div>

    <hr class="mb-6">

    <!-- QUIZ BOX -->
    <div id="quiz-box">
        <h2 id="question" class="text-xl font-semibold mb-6"></h2>
        <div id="options" class="space-y-3"></div>

        <button id="next-btn"
                class="hidden mt-6 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700">
            Next Question
        </button>
    </div>

    <!-- RESULT BOX -->
    <div id="result-box" class="hidden text-center">
        <h2 class="text-2xl font-bold text-purple-700 mb-4">Quiz Completed!</h2>
        <p class="text-lg mb-4">
            Your Score: <span id="score"></span> / <span id="total"></span>
        </p>
        <p class="text-md text-gray-600 mb-6">
            Percentage: <span id="percentage" class="font-bold text-purple-600"></span>%
        </p>
        <div class="mb-6">
            <div class="inline-block bg-purple-50 px-6 py-3 rounded-lg">
                <p id="result-message" class="text-lg font-semibold"></p>
            </div>
        </div>
        <a href="/playquiz"
           class="inline-block bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700">
            Restart Quiz
        </a>
    </div>
</div>

<!-- ================= ANIMATION TEXT ================= -->
<div class="animation-wrapper">
    <div class="line">
        <span class="static-text">QuizVerse ‚Äì</span>
        <span class="animated-text">Quizically Awesome Experiences</span>
    </div>
</div>

<!-- ================= SCRIPT ================= -->
<script>
// Large pool of random questions (60+ questions)
const allQuizData = [
    // Geography
    { question: "What is the capital of France?", options: ["Madrid", "Berlin", "Rome", "Paris"], answer: "Paris" },
    { question: "Which continent is the largest by area?", options: ["Africa", "Asia", "North America", "Europe"], answer: "Asia" },
    { question: "What is the smallest country in the world?", options: ["Monaco", "Vatican City", "San Marino", "Liechtenstein"], answer: "Vatican City" },
    { question: "Which ocean is the deepest?", options: ["Atlantic", "Indian", "Pacific", "Arctic"], answer: "Pacific" },
    { question: "Mount Everest is located in which mountain range?", options: ["Andes", "Rockies", "Himalayas", "Alps"], answer: "Himalayas" },
    { question: "What is the longest river in the world?", options: ["Amazon", "Nile", "Yangtze", "Mississippi"], answer: "Nile" },
    { question: "Which country has the most natural lakes?", options: ["USA", "Canada", "Russia", "Brazil"], answer: "Canada" },
    { question: "What is the capital of Australia?", options: ["Sydney", "Melbourne", "Canberra", "Brisbane"], answer: "Canberra" },
    
    // Science
    { question: "Which planet is known as the Red Planet?", options: ["Earth", "Jupiter", "Mars", "Saturn"], answer: "Mars" },
    { question: "What is the speed of light?", options: ["300,000 km/s", "150,000 km/s", "450,000 km/s", "200,000 km/s"], answer: "300,000 km/s" },
    { question: "What gas do plants absorb from the atmosphere?", options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"], answer: "Carbon Dioxide" },
    { question: "What is H2O commonly known as?", options: ["Hydrogen Peroxide", "Water", "Salt", "Sugar"], answer: "Water" },
    { question: "How many bones are in the adult human body?", options: ["206", "180", "250", "300"], answer: "206" },
    { question: "What is the hardest natural substance on Earth?", options: ["Gold", "Iron", "Diamond", "Platinum"], answer: "Diamond" },
    { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Chloroplast"], answer: "Mitochondria" },
    { question: "What is the chemical symbol for gold?", options: ["Go", "Gd", "Au", "Ag"], answer: "Au" },
    
    // Literature
    { question: "Who wrote 'Romeo and Juliet'?", options: ["William Shakespeare", "Charles Dickens", "Leo Tolstoy", "Mark Twain"], answer: "William Shakespeare" },
    { question: "Who wrote '1984'?", options: ["George Orwell", "Aldous Huxley", "Ray Bradbury", "Ernest Hemingway"], answer: "George Orwell" },
    { question: "What is the first book in the Harry Potter series?", options: ["Chamber of Secrets", "Philosopher's Stone", "Prisoner of Azkaban", "Goblet of Fire"], answer: "Philosopher's Stone" },
    { question: "Who wrote 'Pride and Prejudice'?", options: ["Jane Austen", "Emily Bronte", "Charlotte Bronte", "Mary Shelley"], answer: "Jane Austen" },
    { question: "Which author created Sherlock Holmes?", options: ["Agatha Christie", "Arthur Conan Doyle", "Edgar Allan Poe", "H.G. Wells"], answer: "Arthur Conan Doyle" },
    { question: "Who wrote 'The Great Gatsby'?", options: ["F. Scott Fitzgerald", "Ernest Hemingway", "John Steinbeck", "William Faulkner"], answer: "F. Scott Fitzgerald" },
    { question: "Which book begins with 'Call me Ishmael'?", options: ["Treasure Island", "Moby Dick", "The Old Man and the Sea", "Robinson Crusoe"], answer: "Moby Dick" },
    
    // History
    { question: "In which year did World War II end?", options: ["1943", "1944", "1945", "1946"], answer: "1945" },
    { question: "Who was the first President of the United States?", options: ["Thomas Jefferson", "John Adams", "George Washington", "Benjamin Franklin"], answer: "George Washington" },
    { question: "The ancient city of Rome was built on how many hills?", options: ["5", "7", "9", "10"], answer: "7" },
    { question: "Who discovered America in 1492?", options: ["Vasco da Gama", "Christopher Columbus", "Ferdinand Magellan", "Marco Polo"], answer: "Christopher Columbus" },
    { question: "Which empire built the Colosseum?", options: ["Greek", "Roman", "Egyptian", "Persian"], answer: "Roman" },
    { question: "Who was the first person to walk on the moon?", options: ["Buzz Aldrin", "Neil Armstrong", "Yuri Gagarin", "John Glenn"], answer: "Neil Armstrong" },
    { question: "In which year did the Titanic sink?", options: ["1910", "1912", "1914", "1916"], answer: "1912" },
    { question: "Who was known as the Iron Lady?", options: ["Indira Gandhi", "Margaret Thatcher", "Angela Merkel", "Golda Meir"], answer: "Margaret Thatcher" },
    
    // Technology
    { question: "Who is known as the father of computers?", options: ["Alan Turing", "Charles Babbage", "Steve Jobs", "Bill Gates"], answer: "Charles Babbage" },
    { question: "What does CPU stand for?", options: ["Central Processing Unit", "Computer Personal Unit", "Central Program Utility", "Control Processing Unit"], answer: "Central Processing Unit" },
    { question: "Which company developed the iPhone?", options: ["Samsung", "Google", "Apple", "Microsoft"], answer: "Apple" },
    { question: "What year was Facebook founded?", options: ["2002", "2004", "2006", "2008"], answer: "2004" },
    { question: "What does HTML stand for?", options: ["Hyper Text Markup Language", "High Tech Modern Language", "Home Tool Markup Language", "Hyperlinks and Text Markup Language"], answer: "Hyper Text Markup Language" },
    { question: "Who co-founded Microsoft with Bill Gates?", options: ["Steve Jobs", "Paul Allen", "Larry Page", "Mark Zuckerberg"], answer: "Paul Allen" },
    { question: "What does USB stand for?", options: ["Universal Serial Bus", "United System Bus", "Universal System Board", "United Serial Board"], answer: "Universal Serial Bus" },
    
    // Sports
    { question: "How many players are on a soccer team?", options: ["9", "10", "11", "12"], answer: "11" },
    { question: "Which country won the FIFA World Cup in 2018?", options: ["Brazil", "Germany", "France", "Argentina"], answer: "France" },
    { question: "How many rings are on the Olympic flag?", options: ["4", "5", "6", "7"], answer: "5" },
    { question: "In which sport would you perform a slam dunk?", options: ["Volleyball", "Basketball", "Tennis", "Baseball"], answer: "Basketball" },
    { question: "What is the maximum score in a single frame of bowling?", options: ["100", "200", "300", "400"], answer: "300" },
    { question: "How long is a marathon?", options: ["26.2 miles", "20 miles", "30 miles", "25 miles"], answer: "26.2 miles" },
    { question: "Which country has won the most Cricket World Cups?", options: ["India", "Australia", "England", "West Indies"], answer: "Australia" },
    { question: "What sport is called 'the beautiful game'?", options: ["Basketball", "Cricket", "Football/Soccer", "Tennis"], answer: "Football/Soccer" },
    
    // Movies
    { question: "Who directed 'Jurassic Park'?", options: ["James Cameron", "Steven Spielberg", "George Lucas", "Christopher Nolan"], answer: "Steven Spielberg" },
    { question: "Which movie features the character Jack Dawson?", options: ["Avatar", "Titanic", "The Revenant", "Inception"], answer: "Titanic" },
    { question: "What is the highest-grossing film of all time?", options: ["Avengers: Endgame", "Avatar", "Titanic", "Star Wars"], answer: "Avatar" },
    { question: "Who played Iron Man in the Marvel movies?", options: ["Chris Evans", "Robert Downey Jr.", "Chris Hemsworth", "Mark Ruffalo"], answer: "Robert Downey Jr." },
    { question: "Which movie won the Oscar for Best Picture in 2020?", options: ["1917", "Joker", "Parasite", "Once Upon a Time in Hollywood"], answer: "Parasite" },
    { question: "Who directed 'The Dark Knight'?", options: ["Zack Snyder", "Christopher Nolan", "Tim Burton", "James Wan"], answer: "Christopher Nolan" },
    { question: "In which year was the first Star Wars movie released?", options: ["1975", "1977", "1979", "1980"], answer: "1977" },
    
    // Music
    { question: "Who is known as the King of Pop?", options: ["Elvis Presley", "Michael Jackson", "Prince", "Madonna"], answer: "Michael Jackson" },
    { question: "Which band wrote 'Bohemian Rhapsody'?", options: ["The Beatles", "Led Zeppelin", "Queen", "Pink Floyd"], answer: "Queen" },
    { question: "How many strings does a standard guitar have?", options: ["4", "5", "6", "7"], answer: "6" },
    { question: "Who sang 'Rolling in the Deep'?", options: ["Adele", "Taylor Swift", "Beyonc√©", "Rihanna"], answer: "Adele" },
    { question: "What is the real name of rapper Eminem?", options: ["Marshall Mathers", "Curtis Jackson", "Calvin Broadus", "Shawn Carter"], answer: "Marshall Mathers" },
    { question: "Which band was Freddie Mercury the lead singer of?", options: ["The Beatles", "Queen", "Led Zeppelin", "The Rolling Stones"], answer: "Queen" },
    { question: "Who is known as the Queen of Soul?", options: ["Diana Ross", "Whitney Houston", "Aretha Franklin", "Tina Turner"], answer: "Aretha Franklin" },
    
    // General Knowledge
    { question: "What is the largest mammal in the world?", options: ["African Elephant", "Blue Whale", "Giraffe", "Polar Bear"], answer: "Blue Whale" },
    { question: "How many sides does a hexagon have?", options: ["5", "6", "7", "8"], answer: "6" },
    { question: "What is the tallest building in the world?", options: ["Empire State Building", "Burj Khalifa", "Shanghai Tower", "One World Trade Center"], answer: "Burj Khalifa" },
    { question: "Which language has the most native speakers?", options: ["English", "Spanish", "Mandarin Chinese", "Hindi"], answer: "Mandarin Chinese" },
    { question: "What is the largest desert in the world?", options: ["Sahara", "Arabian", "Antarctic", "Gobi"], answer: "Antarctic" },
    { question: "How many continents are there?", options: ["5", "6", "7", "8"], answer: "7" },
    { question: "What is the smallest prime number?", options: ["0", "1", "2", "3"], answer: "2" }
];

// Shuffle and select 15 random questions
function getRandomQuestions(num = 15) {
    const shuffled = [...allQuizData].sort(() => Math.random() - 0.5);
    return shuffled.slice(0, num);
}

const quizData = getRandomQuestions(15);
let index = 0;
let score = 0;
let timeLeft = 30;
let timer;

const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const nextBtn = document.getElementById("next-btn");
const timerEl = document.getElementById("timer");
const timerBox = document.getElementById("timer-box");
const finishedBadge = document.getElementById("finished-badge");
const quizBox = document.getElementById("quiz-box");
const resultBox = document.getElementById("result-box");
const progressBar = document.getElementById("progress-bar");
const progressText = document.getElementById("progress-text");

function updateProgress() {
    const progress = ((index + 1) / quizData.length) * 100;
    progressBar.style.width = progress + "%";
    progressText.textContent = Math.round(progress) + "%";
}

function loadQuestion() {
    const q = quizData[index];
    questionEl.textContent = q.question;
    optionsEl.innerHTML = "";

    // Shuffle options for each question
    const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

    shuffledOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className = "w-full border rounded-md px-4 py-2 hover:bg-purple-50 transition";
        btn.onclick = () => selectOption(btn, q.answer);
        optionsEl.appendChild(btn);
    });

    nextBtn.classList.add("hidden");
    updateProgress();
}

function selectOption(btn, answer) {
    document.querySelectorAll("#options button").forEach(b => b.disabled = true);

    if (btn.textContent === answer) {
        btn.classList.add("bg-green-100", "border-green-500");
        score++;
    } else {
        btn.classList.add("bg-red-100", "border-red-500");
        // Show correct answer
        document.querySelectorAll("#options button").forEach(b => {
            if (b.textContent === answer) {
                b.classList.add("bg-green-100", "border-green-500");
            }
        });
    }

    nextBtn.classList.remove("hidden");
}

function nextQuestion() {
    index++;
    if (index < quizData.length) {
        loadQuestion();
        resetTimer();
    } else {
        endQuiz();
    }
}

function endQuiz() {
    clearInterval(timer);
    timerBox.classList.add("hidden");
    finishedBadge.classList.remove("hidden");
    document.getElementById("progress-container").classList.add("hidden");

    quizBox.classList.add("hidden");
    resultBox.classList.remove("hidden");

    const percentage = Math.round((score / quizData.length) * 100);

    document.getElementById("score").textContent = score;
    document.getElementById("total").textContent = quizData.length;
    document.getElementById("percentage").textContent = percentage;

    // Result message based on score
    const resultMessage = document.getElementById("result-message");
    if (percentage >= 90) {
        resultMessage.textContent = "üåü Outstanding! You're a quiz master!";
        resultMessage.classList.add("text-green-600");
    } else if (percentage >= 70) {
        resultMessage.textContent = "üéØ Great job! Well done!";
        resultMessage.classList.add("text-blue-600");
    } else if (percentage >= 50) {
        resultMessage.textContent = "üëç Good effort! Keep practicing!";
        resultMessage.classList.add("text-yellow-600");
    } else {
        resultMessage.textContent = "üí™ Don't give up! Try again!";
        resultMessage.classList.add("text-orange-600");
    }
}

function startTimer() {
    timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `‚è±Ô∏è Time Left: ${timeLeft}s`;
        
        // Change color based on time remaining
        if (timeLeft <= 10) {
            timerEl.className = "bg-red-100 text-red-700 px-6 py-2 rounded-full text-xl font-semibold animate-pulse";
        } else if (timeLeft <= 20) {
            timerEl.className = "bg-yellow-100 text-yellow-700 px-6 py-2 rounded-full text-xl font-semibold";
        }
        
        if (timeLeft <= 0) {
            clearInterval(timer);
            nextQuestion();
        }
    }, 1000);
}

function resetTimer() {
    clearInterval(timer);
    timeLeft = 30;
    timerEl.className = "bg-purple-100 text-purple-700 px-6 py-2 rounded-full text-xl font-semibold";
    timerEl.textContent = `‚è±Ô∏è Time Left: ${timeLeft}s`;
    startTimer();
}

// Initialize quiz
loadQuestion();
startTimer();
nextBtn.addEventListener("click", nextQuestion);
</script>

</body>
</html>